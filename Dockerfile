# --------------------------------------------------------------------------------
# Imagen base (oficial).
# --------------------------------------------------------------------------------
FROM openjdk:8-jre-alpine

# --------------------------------------------------------------------------------
# Creación del usuario 'cyp'.
# --------------------------------------------------------------------------------
RUN adduser -D cyp cyp

# --------------------------------------------------------------------------------
# Inserción de recursos.
# --------------------------------------------------------------------------------
COPY target/spring-boot-rest-example-0.0.1-SNAPSHOT.jar /app.jar
RUN sh -c 'touch /app.jar'
COPY docker-resources/init.sh /init.sh
RUN sh -c 'touch /init.sh'

# --------------------------------------------------------------------------------
# Establecimiento del usuario 'cyp'.
# --------------------------------------------------------------------------------
WORKDIR /home/cyp
USER cyp

# --------------------------------------------------------------------------------
# Comando de arranque.
# --------------------------------------------------------------------------------
ENTRYPOINT [ "/init.sh" ]
